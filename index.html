<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ColorPedia</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #f8f9fa, #e0eafc);
      margin: 0;
      padding: 20px;
      text-align: center;
      transition: background 0.3s, color 0.3s;
    }
    h1 {
      color: #4a4a4a;
      font-size: 3em;
      margin-bottom: 10px;
    }
    #search-section {
      margin: 20px auto;
      position: relative;
    }
    #search-box {
      padding: 12px;
      width: 300px;
      font-size: 16px;
      border: 2px solid #ccc;
      border-radius: 8px;
      outline: none;
    }
    #search-suggestions {
      max-width: 300px;
      margin: 0 auto;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 0 0 8px 8px;
      position: absolute;
      z-index: 1000;
      text-align: left;
      left: 0;
      right: 0;
    }
    #search-suggestions div {
      padding: 8px;
      cursor: pointer;
    }
    #search-suggestions div:hover {
      background-color: #f1f1f1;
    }
    #search-btn, #export-btn, #generate-palette-btn {
      padding: 12px 24px;
      font-size: 16px;
      margin-left: 10px;
      border: none;
      background-color: #4CAF50;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    #search-btn:hover, #export-btn:hover, #generate-palette-btn:hover {
      background-color: #45a049;
    }
    #filter-select, #harmony-select {
      padding: 10px;
      font-size: 16px;
      margin-left: 10px;
      border-radius: 8px;
    }
    #color-display {
      margin-top: 30px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    .color-card {
      background: #fff;
      padding: 12px;
      margin: 12px;
      border-radius: 10px;
      border: 1px solid #ddd;
      width: 180px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    .color-card:hover {
      transform: scale(1.05);
    }
    .color-box {
      height: 60px;
      border-radius: 6px;
      margin-bottom: 10px;
    }
    .matte {
      box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
    }
    .metallic {
      background: linear-gradient(135deg, rgba(255,255,255,0.6), rgba(0,0,0,0.2));
      background-blend-mode: overlay;
    }
    .color-info {
      font-size: 14px;
    }
    .dark-mode {
      background: #1e1e1e;
      color: #f1f1f1;
    }
    .dark-mode #search-suggestions {
      background: #333;
      border-color: #555;
    }
    .dark-mode .color-card {
      background: #333;
      border-color: #555;
    }
    .toggle-container {
      display: flex;
      justify-content: center;
      margin-top: 10px;
    }
    .toggle-container label {
      margin-left: 10px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>ColorPedia</h1>

  <div id="search-section">
    <input type="text" id="search-box" placeholder="Enter color name or hex code" />
    <div id="search-suggestions"></div>
    <button id="search-btn">Search</button>
    <select id="filter-select">
      <option value="all">All Finishes</option>
      <option value="standard">Standard</option>
      <option value="matte">Matte</option>
      <option value="metallic">Metallic</option>
    </select>
    <button id="export-btn">Export to CSV</button>
    <select id="harmony-select">
      <option value="analogous">Analogous</option>
      <option value="complementary">Complementary</option>
      <option value="triadic">Triadic</option>
    </select>
    <button id="generate-palette-btn">Generate Palette</button>
  </div>

  <div class="toggle-container">
    <input type="checkbox" id="dark-toggle">
    <label for="dark-toggle">Dark Mode</label>
  </div>

  <div id="color-display"></div>

  <script>
    const colorData = {
      "Red": "#FF0000",
      "Green": "#00FF00",
      "Blue": "#0000FF",
      "Crimson": "#DC143C",
      "Tomato": "#FF6347"
    };

    const searchBox = document.getElementById('search-box');
    const searchBtn = document.getElementById('search-btn');
    const colorDisplay = document.getElementById('color-display');
    const suggestionBox = document.getElementById('search-suggestions');
    const filterSelect = document.getElementById('filter-select');
    const harmonySelect = document.getElementById('harmony-select');
    const darkToggle = document.getElementById('dark-toggle');
    const exportBtn = document.getElementById('export-btn');
    const paletteBtn = document.getElementById('generate-palette-btn');

    function renderColor(name, hex, finish = "standard") {
      const finishClass = finish === "matte" ? "matte" : finish === "metallic" ? "metallic" : "";
      const tooltip = finish === "matte" ? "Matte finish: soft and non-glossy" : finish === "metallic" ? "Metallic finish: shiny and reflective" : "Standard finish: flat color";
      return `<div class="color-card"><div class="color-box ${finishClass}" title="${tooltip}" style="background:${hex}"></div><div class="color-info"><strong>${name}</strong><br>${hex}<br>${finish}</div></div>`;
    }

    function hexToHSL(hex) {
      hex = hex.replace('#','');
      if(hex.length === 3) hex = hex.split('').map(x => x+x).join('');
      const r = parseInt(hex.substring(0,2),16)/255;
      const g = parseInt(hex.substring(2,4),16)/255;
      const b = parseInt(hex.substring(4,6),16)/255;
      const max = Math.max(r,g,b), min = Math.min(r,g,b);
      let h, s, l = (max + min) / 2;
      if(max === min){ h = s = 0; }
      else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch(max){
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h *= 60;
      }
      return [Math.round(h), Math.round(s*100), Math.round(l*100)];
    }

    function hslToHex(h, s, l) {
      s /= 100; l /= 100;
      const k = n => (n + h / 30) % 12;
      const a = s * Math.min(l, 1 - l);
      const f = n => {
        const color = l - a * Math.max(-1, Math.min(k(n) - 3, Math.min(9 - k(n), 1)));
        return Math.round(255 * color).toString(16).padStart(2, '0');
      };
      return `#${f(0)}${f(8)}${f(4)}`;
    }

    function generatePalette() {
      const base = searchBox.value.trim();
      let hex = colorData[base] || base;
      if (!/^#([0-9A-F]{3}){1,2}$/i.test(hex)) {
        alert("Enter a valid base color or hex code");
        return;
      }
      const [h, s, l] = hexToHSL(hex);
      const harmony = harmonySelect.value;
      let paletteHues;
      if (harmony === "analogous") paletteHues = [h, (h + 30) % 360, (h + 60) % 360];
      else if (harmony === "complementary") paletteHues = [h, (h + 180) % 360];
      else if (harmony === "triadic") paletteHues = [h, (h + 120) % 360, (h + 240) % 360];
      colorDisplay.innerHTML = paletteHues.map((hue, i) => {
        const hexVal = hslToHex(hue, s, l);
        return [renderColor(`${harmony} ${i+1}`, hexVal, "standard"), renderColor(`${harmony} ${i+1}`, hexVal, "matte"), renderColor(`${harmony} ${i+1}`, hexVal, "metallic")].join('');
      }).join('');
    }

    searchBtn.addEventListener('click', () => {
      const input = searchBox.value.trim();
      const hex = colorData[input] || input;
      if (!/^#([0-9A-F]{3}){1,2}$/i.test(hex)) {
        alert("Enter a valid color name or hex code");
        return;
      }
      const finish = filterSelect.value;
      colorDisplay.innerHTML = finish === "all"
        ? ["standard", "matte", "metallic"].map(f => renderColor(input, hex, f)).join('')
        : renderColor(input, hex, finish);
    });

    searchBox.addEventListener('input', () => {
      const query = searchBox.value.toLowerCase();
      suggestionBox.innerHTML = '';
      if (query) {
        Object.keys(colorData).forEach(name => {
          if (name.toLowerCase().includes(query)) {
            const div = document.createElement('div');
            div.textContent = name;
            div.onclick = () => {
              searchBox.value = name;
              suggestionBox.innerHTML = '';
            };
            suggestionBox.appendChild(div);
          }
        });
      }
    });

    exportBtn.addEventListener('click', () => {
      const cards = document.querySelectorAll('.color-card .color-info');
      if (!cards.length) {
        alert("No colors to export");
        return;
      }
      let csv = 'Color Name,Hex Code,Finish\n';
      cards.forEach(card => {
        const lines = card.innerText.split('\n');
        csv += `${lines[0]},${lines[1]},${lines[2]}\n`;
      });
      const blob = new Blob([csv], { type: 'text/csv' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'colors.csv';
      a.click();
    });

    paletteBtn.addEventListener('click', generatePalette);
    darkToggle.addEventListener('change', () => document.body.classList.toggle('dark-mode'));
  </script>
</body>
</html>
